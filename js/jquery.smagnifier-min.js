/**
 * jquery.simple-magnifier: jquery smagnifier plugin | (c) 2013 Ilya Kremer
 * MIT license http://www.opensource.org/licenses/mit-license.php
 */
(function(e,t){e.fn.smagnifier=function(t){function i(e){o(e)}function s(t){var n=t.text();var i=e("<span />");t.empty().append(i);var s=e('<div id="'+r+'shadow"></div>').css({width:t.width(),height:t.height(),position:"absolute",top:-9999,left:-9999}).appendTo("body");var o=e("<span />");s.append(o.text(n));var u=150;var a=e("."+r+"text").height();var f=e("."+r+"text").width();var l;var c;do{o.css("font-size",u);l=o.height();c=o.width();u=u-1}while((l>a||c>f)&&u>6);i.css("font-size",u).text(n);s.remove()}function o(t){var i=n.speed;var o=n.prefix+"overlay";e("."+o).remove();e("body").append('<div class="'+o+'"></div>').css("overflow","hidden").bind("keyup."+n.prefix,function(t){if(t.which==27){e.fn.smagnifier.close(n)}});var u=e("."+o).css("height","100%").fadeTo(i,n.opacity).after(n.wrapperMarkup.replace(/\${text}/,t.text()).replace(/\${prefix}/g,r)).find("~ ."+r+"wrapper").fadeTo(i,1).click(function(t){if(e(t.target).closest("div").hasClass(r+"text")){return}e.fn.smagnifier.close(n)}).find("."+r+"text").css("margin-top",e("."+r+"wrapper").height()/2-e("."+r+"text").outerHeight()/2+"px");s(u)}var n=e.extend(true,{},e.fn.smagnifier.defaults,t);var r=n.prefix;return this.each(function(){var t=e(this);t.click(function(){e("html").css("backgound","black");e("body").animate({"border-spacing":.9},{step:function(e,t){},duration:n.speed});o(e(this))});if(n["link-class"]){t.addClass(n["link-class"])}})};e.fn.smagnifier.defaults={speed:"normal",prefix:"smagnifier-",wrapperMarkup:'			<div class="${prefix}wrapper">				<div class="${prefix}text">${text}</div>			</div>		',opacity:.7,"link-class":""};e.fn.smagnifier.close=function(t){var n=t.prefix+"overlay";e("."+n+", ."+t.prefix+"wrapper").fadeTo(t.speed,0,function(){e("."+n+", ."+t.prefix+"wrapper").remove();e("body").css("overflow","").unbind("."+t.prefix)})};e.fn.smagnifier.docHeight=function(){var e=t.body,n=t.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,n.scrollHeight,n.offsetHeight,n.clientHeight)}})(jQuery,document)